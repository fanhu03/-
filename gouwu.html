<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>购物车</title>
<link rel="stylesheet" type="text/css" href="css/gouwu.css"/>
</head>
	<body>
			<!--nav-->
	<div class="header">
		<div class="head w">
			<ul class="left">
				<li><a class="del" href="denglu.html">登录</a>|
					<a class="delr" href="zhuce.html">注册</a></li>
				<li><a href="">个人中心</a></li>
				<li class="lione"><a  href="">合作渠道</a>
					<div class="div"><a href="">电视官网</a></div>
					<span></span></li>
				<li class="litwo"><a   href="">帮助中心</a>
					<ul class="ol" style="z-index: 700;">
						<li><a href="">配送安装</a></li>
						<li><a href="">售后服务</a></li>
						<li><a href="">运费标准</a></li>
						<li><a href="">联系客服</a></li>
					</ul>
					<span></span></li>	
				<li class="lithree"><a  href="">手机版</a><span></span>
					<div class="immg">
					    <a href=""><img src="img/12540050008480802.jpg"/></a>
					    <a href=""><img src="img/11.jpg"/></a>
					</div>
				</li>
			</ul>
		</div>
		
	</div>
  <!--l乐视图片-->
    <div class="pic w">
    	<div><a href="index.html"><img src="img/le.gif"/></a>
    	<span>我的购物车</span></div>
    	<div class=ulrig>
    		<ul>
    			<li><p>1</p></li>
    			<li>2</li>
    			<li>3</li>
    		</ul>
    	</div>
    </div>
	<div class="callp w">
		  <p>全部商品</p>
		  <h3>配送至：</h3>
	</div>
	<div class="mmy w">
		<ul>
			<li><input type="checkbox" />  全选</li>
			<li class="shpp">商品</li>
			<li class="dmoney">单价（元）</li>
			<li class="num">数量</li>
			<li class="callnum">小计 （元）</li>
			<li class="caozuo">操作</li>
		</ul>
	</div>
  <div class="jiesuan w">
	<div class="leshi w">
		 <p>乐视自营</p>
		</div>
	<div class="ulu">
	    <ul class="uu">
	    	<li class="sss"></li> 

	    	<li class="super"> </li>
	    	<li class="mmony"></li>
	    	<li class="fu">
	    		<a class="ajian" href="##"></a>
	    		<a class="count" href=""></a>
	    		<a class="ajia" href="##"></a>
	    	</li>
	    	<li class="ul"></li>
	    	<li class="lastli"><a href="##"></a></li>
	    </ul>
	    </div>
	</div>
<!--border-->
    <div id="dl"></div>
   
   <!--商品结算-->
   <div class="monery w">
   	  <ul>
   	  	<li><input type="checkbox"  />  全选</li>
   	  	<li class="del"><a href="">删除选中商品</a></li>
   	  	<li class="del"><a href="">继续购物</a></li>
   	  	<li class="post">已选择 <span class="numb"></span> 件商品 总计（不含运费）：</li>
   	  	<li class="uul">18957</li>
   	  	<li class="fuku">去结算</li>
   	  </ul>
   </div>
   <!--/////////////////--> 
    <div class="wuliu w">
  	  	 	   <ul>
  	  	 	   	<li class="true"><img src="img/zheng.gif"/><span>正品保障</span></li>
  	  	 	   	<li><a href=""><img src="img/qi.gif"/><span>七天无理由退货</span></a></li>
  	  	 	   	<li><a href=""><img src="img/huo.gif"/><span>物流服务</span></a></li>
  	  	 	   	<li><a href=""><img src="img/ding.gif"/><span>售后服务网点</span></a></li>
  	  	 	   </ul>
  	  	 </div>
  	<!--底部-->
  	<div class="foot">
  		<div class="footleft w">
  			<ul>
  				<li>选购及了解</li>
  				<li><a href="">超级电视</a></li>
  				<li><a href="">屏霸</a></li>
  				<li><a href="">乐视盒子</a></li>
  			</ul>
  			<ul>
  				<li>会员相关</li>
  				<li><a href="">超级影视会员</a></li>
  			</ul>
  			<ul>
  				<li>帮助中心</li>
  				<li><a href="">新手入门</a></li>
  				<li><a href="">物流服务</a></li>
  				<li><a href="">售后政策</a></li>
  				<li><a href="">安装报修</a></li>
  			</ul>
  			<ul>
  				<li>服务支持</li>
  				<li><a href="">自助服务</a></li>
  				<li><a href="">乐码通道</a></li>
  			</ul>
  			<ul>
  				<li>关于乐视商城</li>
  				<li><a href="">公司介绍</a></li>
  				<li><a href="">联系我们</a></li>
  				<li><a href="">加入我们</a></li>
  				<li><a href="">关注我们</a></li>
  			</ul>
  			<h3>在线客服8:00-21:00</h3>
  			<h5>1010-9000 8:00-21:00</h5>
  		</div>
  	</div>
  	  	<div id="btn1">回到顶部</div>

	</body>
</html>
<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
	
<script type="text/javascript">
  	//获取cookie函数
	function getCookie (cname) {//获取cookie函数
		var cname=cname+'=';
		var arr=document.cookie.split(';');
		for(var i in arr){
			var c=arr[i].trim();
			if(c.indexOf(cname)!=-1){
				return c.substring(cname.length)
			}
		}
		return '';
	}	

	//删除字符首末空格
	function shoumo (str) {
		var pattern1=/^[\s]+/;//首
		var pattern2=/[\s]+$/;//末
		return str.replace(pattern1,'').replace(pattern2,'');
	}
      console.log(getCookie('imgg'));
      

      $.get('php/shoping.php',function(data){
      	
//	console.log(shoumo(data));
	let res=data.split('#');
//	console.log(res);
//	console.log(he);
//	console.log(he.img1);
//	$('.sss img').attr('src','imgs/'+he.img);
//
//	$('.super').html(he.name);
//	$('.mmony').html(he.price);
	
	for(let i=0;i<res.length-1;i++){
//		console.log(he.img);
		res[i]=JSON.parse(shoumo(res[i]));
		let ulp = document.createElement('ul');
		 ulp.className = "uu";
		$('.ulu')[0].appendChild(ulp);
		let firstli = document.createElement('li');
		 firstli.className = "sss";
		 ulp.appendChild(firstli);
		 
		 let inp = document.createElement('input');
		   inp.type='checkbox';
		   firstli.appendChild(inp);
		  let imgs =document.createElement('img');
		    imgs.src='imgs/'+res[i].img;
		    firstli.appendChild(imgs);
		  
		  let twoli = document.createElement('li');
		    twoli.innerHTML=res[i].goodsname;
		    twoli.className = "super";
		    ulp.appendChild(twoli);
		    
		    let thli = document.createElement('li');
		   thli.className = "mmony";
		      thli.innerHTML =res[i].price;
		      ulp.appendChild(thli);
		    
		   let fuli = document.createElement('li');
		     fuli.className = "fu";
		      ulp.appendChild(fuli);
		      
		      let ajian =document.createElement('a');
		      ajian.className = "ajian";
		      ajian.href='##';
		        ajian.innerHTML = "-";
		        fuli.appendChild(ajian);
		        let anum =document.createElement('a');
		         anum.className = "count";
		         anum.href='##';
		          anum.innerHTML="1";
		          fuli.appendChild(anum);
		          
		          let ajia =document.createElement('a');
		            ajia.className = "ajia";
		            ajia.href='##';
		          ajia.innerHTML="+";
		            fuli.appendChild(ajia);
		          let fvli =document.createElement('li');
		             fvli .className = "ul";
		             fvli.innerHTML=res[i].price;
		             ulp.appendChild(fvli);
		             
		             let sli =document.createElement('li');
		             sli .className = "lastli";
		              ulp.appendChild(sli);
		              let lasa =document.createElement('a');
		              lasa.innerHTML = "删除";
		              sli.appendChild(lasa);
		              
		
	}
	//点击减号
	$('.ajian').click(function(){
		//件数
		let num=parseInt($(this).next().text());
		let danprice = parseInt($(this).parent().parent().find(".mmony").text());
		num--;
		if(num<=0){
			return;
		}else{
			$(this).next().html(num);
			
			let price = num*danprice;
			$(this).parent().parent().parent().find(".ul").html(price);
			//拿到当前值
			let strprice1 = parseInt($(".uul").text());
			//点击减号，减去当前单价
			
			$(".uul").html(strprice1-price);
		}
	});
	//点击加号
	$(".ajia").click(function(){
		let num=parseInt($(this).prev().text());
		let danprice = parseInt($(this).parent().parent().find(".mmony").text());
		num++;
		if(num>10){
			alert("该商品最多购买10件");
			return;
		}
		else{
			$(this).prev().html(num);
			let price = num*danprice;
			$(this).parent().parent().find(".ul").html(price);
			
			let strprice1 = parseInt($(".uul").text());
			
			$(".uul").html(strprice1+danprice);
			
			
			
		}
		
		
	})
	
  
});
	/////////////////////////

	
	
	
//	setTimeout(function(){
//		$('.ajia').click(function(){
//			let num1=parseInt($(this).prev().html());
//			$(this).prev().html(num1+1);
//		});
//	},2000)
	////////////////////////////
	
//	$(".ajia").each(function(){
//		console.log(ajia);
//		$(this).click(function(){
////			console.log($(this));代表jia
//		    let num = $(this).val();
////		    console.log(num);
//			let count = $(this).parents(".uu").find(".mmony").html();
////		    console.log(count)
//			
//		     all = (count*num).toFixed(2);
//		     console.log(all);
//		    $(this).parents(".uu").find(".ul").html(all);//一行的总价	
//          total();
//          num1();
//		})
//	});

//	
//	function num1(){
//		var nm = $('.count');
//		var num1 = 0;
//		for(let i=0;i<nm.length;i++){
//			console.log(nm.length)
////			alert(nm);
//			num1+=parseInt(nm[i].value);
//			console.log(num1)
//		}
//		$(".numb").html(num1);
//	}
	
	


</script>